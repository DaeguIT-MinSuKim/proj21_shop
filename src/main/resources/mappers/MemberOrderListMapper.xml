<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="proj21_shop.mapper.order.MemberOrderListMapper">

	<resultMap type="OrderDTO" id="ResOrder">
		<id property="orderNum" column="order_num" />
		<result property="orderDate" column="order_date" />
		<result property="orderProQuantity" column="order_pro_quantity" />
		<result property="orderPrice" column="order_price" />
		<result property="deliveryStatus" column="delivery_status" />
		<association property="proName" javaType="ProductDTO"
			autoMapping="true">
			<result property="proName" column="pro_name" />
		</association>
	</resultMap>

	<select id="listPaging" resultMap="ResOrder">
		select o.order_num, p.pro_name
		,o.order_date, o.order_pro_quantity, o.order_price, o.delivery_status
		from `order` o
		join product p
		on o.pro_num = p.pro_num
		where order_member_id = #{memberId}
		order by order_num desc
		limit #{page}, 10;
	</select>

	<select id="countOrders" resultType="int">
		select count(order_num)
		from `order`
	</select>
	
	<select id="listStandard" resultMap="ResOrder">
	select o.order_num, p.pro_name
		,o.order_date, o.order_pro_quantity, o.order_price, o.delivery_status
		from `order` o
		join product p
		on o.pro_num = p.pro_num
		where order_member_id = #{memberId}
		order by order_num desc
		limit #{pageStart}, #{perPageNum}
	</select>

</mapper>