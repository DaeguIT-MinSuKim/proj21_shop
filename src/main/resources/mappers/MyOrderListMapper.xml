<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="proj21_shop.mapper.order.MyOrderListMapper">
	<resultMap type="OrderDTO" id="resOrder">
		<id property="orderProNum" column="order_pro_num" />
		<result property="orderDate" column="order_date" />
		<result property="orderProQuantity" column="order_pro_quantity" />
		<result property="orderPrice" column="order_price" />
		<result property="deliveryStatus" column="delivery_status" />
		<association property="proName" javaType="ProductDTO"
			autoMapping="true">
			<result property="proName" column="pro_name" />
		</association>
	</resultMap>

	<resultMap type="OrderDTO" id="resDetailOrder">
		<id property="orderProNum" column="order_pro_num" />
		<result property="orderPrice" column="order_price" />
		<result property="orderProQuantity" column="order_pro_quantity" />
		<result property="deliveryStatus" column="delivery_status"/>
		<result property="orderDate" column="order_date"/>
		<association property="productImageDTO"
			javaType="ProductImageDTO" autoMapping="true">
			<result property="proImagefilename" column="pro_imagefilename" />
		</association>
	</resultMap>

	<select id="selectOrderByMember" resultMap="resOrder">
		select
		o.order_pro_num, p.pro_name, o.order_date, o.order_pro_quantity,
		o.order_price, o.delivery_status
		from `order` o
		join product p
		  on o.pro_num = p.pro_num
		where
		order_member_id = #{memberId}
	</select>

	<select id="selectOrderDetailByMember" resultMap="resDetailOrder">
		select o.order_pro_num, pi2.pro_imagefilename,
		o.order_price, o.order_pro_quantity, o.delivery_status, o.order_date
		from `order` o
		join pro_img pi2
		on o.pro_num = pi2.pro_num
		where order_member_id = #{memberId}
	</select>
</mapper>